image:
  - Visual Studio 2017
  - Visual Studio 2015

version: 2.2.1-{build}

environment:
  QT_VER: 5.9
  PROJECT: qtjsonserializer

install:
#  - .\qtinit.bat
  - git clone https://github.com/Skycoder42/QtModules.git .\qtmodules-travis
  - .\qtmodules-travis\ci\win\setup.bat

build_script:
  - .\qtmodules-travis\ci\win\build.bat

after_build:
  - .\qtmodules-travis\ci\win\upload-prepare.bat

artifacts:
  - path: install\Qt\%QT_VER%\build_win_msvc2017_%QT_VER%.zip
    name: build_win_msvc2017_%QT_VER%.zip
  - path: install\Qt\%QT_VER%\build_win_msvc2015_%QT_VER%.zip
    name: build_win_msvc2015_%QT_VER%.zip
  - path: install\Qt\%QT_VER%\build_win_mingw_%QT_VER%.zip
    name: build_win_mingw_%QT_VER%.zip
